import{_ as i,M as l,p as c,q as n,Q as s,R as e,t,N as r,a1 as a}from"./framework-9d7a10f9.js";const p="/assets/1-4570f211.jpg",v="data:image/jpeg;base64,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",h="/assets/3-dee0cb1e.jpg",d="/assets/4-b12e49cd.jpg",u="/assets/7-e25fe7ac.jpg",f="/assets/8-da4fa730.png",m="/assets/5-e5210874.jpg",g={},b=a('<h2 id="题记" tabindex="-1"><a class="header-anchor" href="#题记" aria-hidden="true">#</a> 题记</h2><p>在安装完虚拟机之后，可能你想要在通过本地shell软件或<code>git bash</code> 连接服务器的ssh服务，这一篇介绍在本地使用<code>git bash</code>通过ssh协议连接服务器。</p><p>概述：</p><ol><li>首先安装SSH服务</li><li>开启ROOT账户</li><li>远程连接</li></ol><p>首先确定一下本地能否ping到服务器，保证虚拟机能够和宿主机正常通信： <img src="'+p+'" alt="ping"></p>',5),x=a('<h3 id="安装ssh服务" tabindex="-1"><a class="header-anchor" href="#安装ssh服务" aria-hidden="true">#</a> 安装SSH服务</h3><ol><li>查看SSH服务是否开启 使用<code>ps -e|grep ssh</code> 或 <code>sudo service ssh status</code> 查看,看sshd有没有进程就可以了，有的话说明SSH服务已安装，没有的话就需要安装了</li></ol><p>这是已安装的状态，安装过后可跳过2、3步骤，<br><img src="'+v+'" alt="ssha"></p><ol start="2"><li>安装SSH服务 使用<code>sudo apt install ssh -y</code><br> 或<code>sudo apt-get install openssh-server</code><code>sudo apt-get install openssh-client</code></li></ol><p><code>openssh-server</code>是服务端，通过开放本机的ssh服务，客户端才能连接，必选<br><code>open-client</code>是SSH客户端，通过open-client可以远程连接其他主机，可选</p><ol start="3"><li><p>启动SSH服务 <code>service ssh start</code> 或 <code>sudo /etc/init.d/ssh start</code>，然后查看SSH服务状态，使用步骤1的命令：<code>ps -aux |grep ssh</code></p></li><li><p>修改配置文件，设置完后重启服务 修改配置文件中的端口号和设置root用户的登录权限,输入命令：<br><code>sudo vim /etc/ssh/sshd_config</code></p></li></ol><p><img src="'+h+'" alt="ssha"></p><p>注释掉<code>PermitRootLogin without-password</code>,重新<code>PermitRootLogin</code>参数的值为<code>yes</code>，PermitRootLogin可以限定root用户通过ssh的登录方式，如禁止登陆、禁止密码登录、仅允许密钥登陆和开放登陆<br> 设置为<code>yes</code>的意思是允许SSH登录，不限制登录方式</p><ol start="5"><li>重启SSH服务 <code>sudo service ssh restart</code> 或 <code>sudo /etc/init.d/ssh restart</code>,不报错表示重启成功，也可查询状态</li></ol><p><img src="'+d+'" alt="ssh"></p><p><code>sudo /etc/init.d/ssh restart</code></p>',11),_=a(`<h2 id="ftp服务安装" tabindex="-1"><a class="header-anchor" href="#ftp服务安装" aria-hidden="true">#</a> FTP服务安装</h2><ul><li>安装vsftpd服务</li></ul><div class="language-text" data-ext="text"><pre class="language-text"><code>sudo apt install vsftpd
</code></pre></div><ul><li>配置 vsftpd 服务器</li></ul><ol><li>备份配置文件</li></ol><div class="language-text" data-ext="text"><pre class="language-text"><code>sudo mv /etc/vsftpd.conf /etc/vsftpd.conf_bak
</code></pre></div><ol start="2"><li>修改文件配置</li></ol><div class="language-text" data-ext="text"><pre class="language-text"><code>sudo vim /etc/vsftpd.conf
</code></pre></div><p>修改内容如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>listen=NO                                 #阻止 vsftpd 在独立模式下运行
anonymous_enable=NO                       #是否允许匿名登录，不做匿名的话就不重要
local_enable=YES                          #允许本地用户登陆
write_enable=YES                          #开启用户写权限（上传文件权限）
chroot_local_user=YES                     #限制用户只能看见 local_root 目录（或 home 目录）
chroot_list_enable=YES                    #启用限制用户名单                
chroot_list_file=/etc/vsftpd.chroot_list  #限制ftp登录的用户名单
local_root=/home/ftp　                     #设置根目录所在的位置，可以自己设置
pam_service_name=vsftpd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>创建ftp用户并设置密码</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 创建用户
# -m 自动建立/home/下的用户目录
sudo useradd -m &lt;username&gt;

# 修改密码
sudo passwd &lt;username&gt;

# 创建 FTP 根目录
# sudo mkdir /home/ftp/ftp_root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>添加访问ftp服务器的白名单</li></ol><div class="language-text" data-ext="text"><pre class="language-text"><code>sudo vim /etc/vsftpd.chroot_list
</code></pre></div><p><img src="`+d+'" alt="添加限制用户"></p><p>这里面添加的用户，可以访问ftp服务器根目录之外的目录。</p>',16),S=a(`<ol start="5"><li>重启ftp服务</li></ol><div class="language-text" data-ext="text"><pre class="language-text"><code>sudo service vsftpd restart
</code></pre></div><h3 id="ftp-其他命令" tabindex="-1"><a class="header-anchor" href="#ftp-其他命令" aria-hidden="true">#</a> FTP 其他命令</h3><ul><li>启动 ftp 服务</li></ul><div class="language-text" data-ext="text"><pre class="language-text"><code>service vsftpd start
</code></pre></div><ul><li>重启服务以及关闭服务</li></ul><div class="language-text" data-ext="text"><pre class="language-text"><code>service vsftpd restart      #重启FTP服务
service vsftpd stop         #关闭FTP服务
</code></pre></div><ul><li>查询状态</li></ul><div class="language-text" data-ext="text"><pre class="language-text"><code>service vsftpd status 
或
ps -e | grep vsftpd
</code></pre></div><h3 id="遇到的问题" tabindex="-1"><a class="header-anchor" href="#遇到的问题" aria-hidden="true">#</a> 遇到的问题</h3><ul><li>ftp登录错误 当我ftp账户连接FTP服务时（使用FileZilla），响应报错：</li></ul><p><img src="`+u+'" alt="ftp"></p><p>找了好久解决方法，问题出现在配置文件中 <img src="'+f+'" alt="ftp"></p><p>将<code>pam_service_name</code>值改为<code>ftp</code></p>',14),q={href:"https://blog.csdn.net/wlchn/article/details/50855447",target:"_blank",rel:"noopener noreferrer"},A=e("ul",null,[e("li",null,[t("vim编辑文件时未正确退出解决方法 vim编辑文件时异常退出，下次使用vim编辑时会提示"),e("code",null,'swap file ".vsftpd.conf.swp"already exists！'),t(" ，并提示选择操作")])],-1),P=e("p",null,"使用vim编辑时实际上是先copy一份临时文件并映射到内存中让我们编辑，，当执行 w 后才保存临时文件到原文件，执行 q 会删除临时文件；每次启动vim都是检查是否存在临时文件，有就会询问如何处理，",-1),k=e("p",null,[t("解决办法是删除临时文件 "),e("code",null,"rm -f .vsftpd.conf.swp")],-1),B=a('<h2 id="root账户配置" tabindex="-1"><a class="header-anchor" href="#root账户配置" aria-hidden="true">#</a> root账户配置</h2><ol><li>设置root角色的密码，若之前从来没有设置过，该操作也开启了root角色 <code>sudo passwd root</code></li></ol><h3 id="使用git-bash-远程连接" tabindex="-1"><a class="header-anchor" href="#使用git-bash-远程连接" aria-hidden="true">#</a> 使用git bash 远程连接</h3><ol><li>打开<code>git bash</code>工具</li><li>输入命令 <code>ssh root@192.168.43.131</code></li></ol><p>这里记录一下，刚开始在服务端安装完SSH服务后，使用<code>git bash</code>连接不上服务器，后来才查到是没有设置root账户，&quot;root&quot;是已创建的账户；如果改变端口后要跟 -p 加端口号，如：<br><code>$ ssh -p 9521 root@192.168.43.131</code></p><p><img src="'+m+'" alt="ssh"></p><p>退出服务使用命令：<code>logout</code></p>',7);function Q(W,j){const o=l("ExternalLinkIcon");return c(),n("div",null,[b,s(" ---------------------------------------- SSH 相关开始 ------------------------------------------------------ "),x,s(" ---------------------------------------- SSH 相关结束 ------------------------------------------------------ "),s(" ---------------------------------------- FTP 相关开始 ------------------------------------------------------ "),_,s(" 修改 `/etc/pam.d/vsftpd`\n```\nsudo vim /etc/pam.d/vsftpd\n```\n\n注释掉`auth   required        pam_shells.so`, 保存退出 "),S,e("p",null,[t("放上我找到的问题汇总，"),e("a",q,[t("ftp vsftpd 530 login incorrect 解决办法汇总"),r(o)])]),A,P,k,s(" ---------------------------------------- FTP 相关结束 ------------------------------------------------------ "),B])}const z=i(g,[["render",Q],["__file","ssh和root账户配置(二).html.vue"]]);export{z as default};
